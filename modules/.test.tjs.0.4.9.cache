var tame = require('tamejs').runtime;
var __tame_defer_cb = null;
var __tame_fn_0 = function (__tame_k) {
    tame.setActiveCb (__tame_defer_cb);
    var initDb = require ( './base.js' )
    , models = require ( './schema.js' )
    , mysql = require ( 'mysql' )
    , _ = require ( 'underscore' )
    , async = require ( 'async' )
    ;
    
    var db = mysql . createClient ( {
    user : 'eq' ,
    password : 'hjvfirf' ,
    host : '127.0.0.1' ,
    port : 3306 ,
    database : 'dossee'
    } ) ;
    
    var collections = initDb ( db , models ) ;
    
    var getInstitutes =
    function  (autocb) {
        var __tame_defer_cb = tame.findDeferCb ([autocb]);
        tame.setActiveCb (__tame_defer_cb);
        var __tame_this = this;
        var __tame_fn_21 = function (__tame_k) {
            tame.setActiveCb (__tame_defer_cb);
            autocb = autocb ||
            function  () {
            }
            ;
            var __tame_fn_1 = function (__tame_k) {
                tame.setActiveCb (__tame_defer_cb);
                var __tame_fn_2 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var __tame_defers = new tame.Deferrals (__tame_k);
                    var __tame_fn_3 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        collections . institutes . getMany (
                        __tame_defers.defer ( { 
                            assign_fn : 
                                function () {
                                    err = arguments[0];
                                    institutes = arguments[1];
                                }
                                ,
                            parent_cb : __tame_defer_cb,
                            line : 21,
                            file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                        } )
                        ) ;
                        tame.callChain([__tame_k]);
                        tame.setActiveCb (null);
                    };
                    __tame_fn_3(tame.end);
                    __tame_defers._fulfill();
                    tame.setActiveCb (null);
                };
                var __tame_fn_20 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var institutesCollection = { } ;
                    var __tame_fn_4 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        var __tame_fn_5 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            var __tame_k_implicit = {};
                            var i = 0 , n = institutes . length;
                            var __tame_fn_6 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                var __tame_fn_7 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    i ++
                                    tame.callChain([__tame_fn_6, __tame_k]);
                                    tame.setActiveCb (null);
                                };
                                __tame_k_implicit.k_break = __tame_k;
                                __tame_k_implicit.k_continue = function() { __tame_fn_7(__tame_k); };
                                if (i < n) {
                                    var __tame_fn_8 = function (__tame_k) {
                                        tame.setActiveCb (__tame_defer_cb);
                                        var __tame_fn_9 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            var __tame_defers = new tame.Deferrals (__tame_k);
                                            var __tame_fn_10 = function (__tame_k) {
                                                tame.setActiveCb (__tame_defer_cb);
                                                institutes [ i ] . getRelated ( 'students' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            students = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 26,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                institutes [ i ] . getRelated ( 'teachers' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            teachers = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 27,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                institutes [ i ] . getRelated ( 'project' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            project = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 28,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                tame.callChain([__tame_k]);
                                                tame.setActiveCb (null);
                                            };
                                            __tame_fn_10(tame.end);
                                            __tame_defers._fulfill();
                                            tame.setActiveCb (null);
                                        };
                                        var __tame_fn_17 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            institutesCollection [ i ] = institutes [ i ] . data ;
                                            institutesCollection [ i ] . project = project . data ;
                                            institutesCollection [ i ] . students = [ ] ;
                                            institutesCollection [ i ] . teachers = [ ] ;
                                            var __tame_fn_11 = function (__tame_k) {
                                                tame.setActiveCb (__tame_defer_cb);
                                                var __tame_fn_12 = function (__tame_k) {
                                                    tame.setActiveCb (__tame_defer_cb);
                                                     for (var j = 0 , m = students . length ; j < m ; j ++) {
                                                        institutesCollection [ i ] . students [ j ] = students [ j ] . data ;
                                                    }
                                                    tame.callChain([__tame_k]);
                                                    tame.setActiveCb (null);
                                                };
                                                var __tame_fn_16 = function (__tame_k) {
                                                    tame.setActiveCb (__tame_defer_cb);
                                                    ;
                                                    var __tame_fn_13 = function (__tame_k) {
                                                        tame.setActiveCb (__tame_defer_cb);
                                                        var __tame_fn_14 = function (__tame_k) {
                                                            tame.setActiveCb (__tame_defer_cb);
                                                             for (var j = 0 , m = teachers . length ; j < m ; j ++) {
                                                                institutesCollection [ i ] . teachers [ j ] = teachers [ j ] . data ;
                                                            }
                                                            tame.callChain([__tame_k]);
                                                            tame.setActiveCb (null);
                                                        };
                                                        var __tame_fn_15 = function (__tame_k) {
                                                            tame.setActiveCb (__tame_defer_cb);
                                                            ;
                                                            tame.callChain([__tame_k]);
                                                            tame.setActiveCb (null);
                                                        };
                                                        tame.callChain([__tame_fn_14, __tame_fn_15, __tame_k]);
                                                        tame.setActiveCb (null);
                                                    };
                                                    tame.callChain([__tame_fn_13, __tame_k]);
                                                    tame.setActiveCb (null);
                                                };
                                                tame.callChain([__tame_fn_12, __tame_fn_16, __tame_k]);
                                                tame.setActiveCb (null);
                                            };
                                            tame.callChain([__tame_fn_11, __tame_k]);
                                            tame.setActiveCb (null);
                                        };
                                        tame.callChain([__tame_fn_9, __tame_fn_17, __tame_k]);
                                        tame.setActiveCb (null);
                                    };
                                    tame.callChain([__tame_fn_8, __tame_fn_7, __tame_k]);
                                } else {
                                    tame.callChain([__tame_k]);
                                }
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_6, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        var __tame_fn_19 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            ;
                            var __tame_fn_18 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                    autocb(institutesCollection);
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_18, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        tame.callChain([__tame_fn_5, __tame_fn_19, __tame_k]);
                        tame.setActiveCb (null);
                    };
                    tame.callChain([__tame_fn_4, __tame_k]);
                    tame.setActiveCb (null);
                };
                tame.callChain([__tame_fn_2, __tame_fn_20, __tame_k]);
                tame.setActiveCb (null);
            };
            tame.callChain([__tame_fn_1, __tame_k]);
            tame.setActiveCb (null);
        };
        tame.callChain([__tame_fn_21, autocb, __tame_k]);
        tame.setActiveCb (null);
    }
    var getStudents =
    function  (autocb) {
        var __tame_defer_cb = tame.findDeferCb ([autocb]);
        tame.setActiveCb (__tame_defer_cb);
        var __tame_this = this;
        var __tame_fn_36 = function (__tame_k) {
            tame.setActiveCb (__tame_defer_cb);
            autocb = autocb ||
            function  () {
            }
            ;
            var __tame_fn_22 = function (__tame_k) {
                tame.setActiveCb (__tame_defer_cb);
                var __tame_fn_23 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var __tame_defers = new tame.Deferrals (__tame_k);
                    var __tame_fn_24 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        collections . students . getMany (
                        __tame_defers.defer ( { 
                            assign_fn : 
                                function () {
                                    err = arguments[0];
                                    students = arguments[1];
                                }
                                ,
                            parent_cb : __tame_defer_cb,
                            line : 49,
                            file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                        } )
                        ) ;
                        tame.callChain([__tame_k]);
                        tame.setActiveCb (null);
                    };
                    __tame_fn_24(tame.end);
                    __tame_defers._fulfill();
                    tame.setActiveCb (null);
                };
                var __tame_fn_35 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var studentsCollection = { } ;
                    var __tame_fn_25 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        var __tame_fn_26 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            var __tame_k_implicit = {};
                            var i = 0 , n = students . length;
                            var __tame_fn_27 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                var __tame_fn_28 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    i ++
                                    tame.callChain([__tame_fn_27, __tame_k]);
                                    tame.setActiveCb (null);
                                };
                                __tame_k_implicit.k_break = __tame_k;
                                __tame_k_implicit.k_continue = function() { __tame_fn_28(__tame_k); };
                                if (i < n) {
                                    var __tame_fn_29 = function (__tame_k) {
                                        tame.setActiveCb (__tame_defer_cb);
                                        var __tame_fn_30 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            var __tame_defers = new tame.Deferrals (__tame_k);
                                            var __tame_fn_31 = function (__tame_k) {
                                                tame.setActiveCb (__tame_defer_cb);
                                                students [ i ] . getRelated ( 'institute' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            institute = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 54,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                students [ i ] . getRelated ( 'team' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            team = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 55,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                students [ i ] . getCrossRelated ( 'team' , 'team' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            team = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 56,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                tame.callChain([__tame_k]);
                                                tame.setActiveCb (null);
                                            };
                                            __tame_fn_31(tame.end);
                                            __tame_defers._fulfill();
                                            tame.setActiveCb (null);
                                        };
                                        var __tame_fn_32 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            studentsCollection [ i ] = students [ i ] . data ;
                                            studentsCollection [ i ] . institute = institute . data ;
                                            studentsCollection [ i ] . team = team . data ;
                                            tame.callChain([__tame_k]);
                                            tame.setActiveCb (null);
                                        };
                                        tame.callChain([__tame_fn_30, __tame_fn_32, __tame_k]);
                                        tame.setActiveCb (null);
                                    };
                                    tame.callChain([__tame_fn_29, __tame_fn_28, __tame_k]);
                                } else {
                                    tame.callChain([__tame_k]);
                                }
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_27, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        var __tame_fn_34 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            ;
                            var __tame_fn_33 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                    autocb(studentsCollection);
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_33, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        tame.callChain([__tame_fn_26, __tame_fn_34, __tame_k]);
                        tame.setActiveCb (null);
                    };
                    tame.callChain([__tame_fn_25, __tame_k]);
                    tame.setActiveCb (null);
                };
                tame.callChain([__tame_fn_23, __tame_fn_35, __tame_k]);
                tame.setActiveCb (null);
            };
            tame.callChain([__tame_fn_22, __tame_k]);
            tame.setActiveCb (null);
        };
        tame.callChain([__tame_fn_36, autocb, __tame_k]);
        tame.setActiveCb (null);
    }
    var getProjects =
    function  (autocb) {
        var __tame_defer_cb = tame.findDeferCb ([autocb]);
        tame.setActiveCb (__tame_defer_cb);
        var __tame_this = this;
        var __tame_fn_51 = function (__tame_k) {
            tame.setActiveCb (__tame_defer_cb);
            autocb = autocb ||
            function  () {
            }
            ;
            var __tame_fn_37 = function (__tame_k) {
                tame.setActiveCb (__tame_defer_cb);
                var __tame_fn_38 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var __tame_defers = new tame.Deferrals (__tame_k);
                    var __tame_fn_39 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        collections . projects . getMany (
                        __tame_defers.defer ( { 
                            assign_fn : 
                                function () {
                                    err = arguments[0];
                                    projects = arguments[1];
                                }
                                ,
                            parent_cb : __tame_defer_cb,
                            line : 70,
                            file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                        } )
                        ) ;
                        tame.callChain([__tame_k]);
                        tame.setActiveCb (null);
                    };
                    __tame_fn_39(tame.end);
                    __tame_defers._fulfill();
                    tame.setActiveCb (null);
                };
                var __tame_fn_50 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var projectsCollection = { } ;
                    var __tame_fn_40 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        var __tame_fn_41 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            var __tame_k_implicit = {};
                            var i = 0 , n = projects . length;
                            var __tame_fn_42 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                var __tame_fn_43 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    i ++
                                    tame.callChain([__tame_fn_42, __tame_k]);
                                    tame.setActiveCb (null);
                                };
                                __tame_k_implicit.k_break = __tame_k;
                                __tame_k_implicit.k_continue = function() { __tame_fn_43(__tame_k); };
                                if (i < n) {
                                    var __tame_fn_44 = function (__tame_k) {
                                        tame.setActiveCb (__tame_defer_cb);
                                        var __tame_fn_45 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            var __tame_defers = new tame.Deferrals (__tame_k);
                                            var __tame_fn_46 = function (__tame_k) {
                                                tame.setActiveCb (__tame_defer_cb);
                                                projects [ i ] . getRelated ( 'team' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            team = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 75,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                projects [ i ] . getRelated ( 'institute' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            institute = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 76,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                tame.callChain([__tame_k]);
                                                tame.setActiveCb (null);
                                            };
                                            __tame_fn_46(tame.end);
                                            __tame_defers._fulfill();
                                            tame.setActiveCb (null);
                                        };
                                        var __tame_fn_47 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            projectsCollection [ i ] = projects [ i ] . data ;
                                            projectsCollection [ i ] . team = team . data ;
                                            tame.callChain([__tame_k]);
                                            tame.setActiveCb (null);
                                        };
                                        tame.callChain([__tame_fn_45, __tame_fn_47, __tame_k]);
                                        tame.setActiveCb (null);
                                    };
                                    tame.callChain([__tame_fn_44, __tame_fn_43, __tame_k]);
                                } else {
                                    tame.callChain([__tame_k]);
                                }
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_42, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        var __tame_fn_49 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            ;
                            console . log ( projectsCollection ) ;
                            var __tame_fn_48 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                    autocb(projectsCollection);
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_48, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        tame.callChain([__tame_fn_41, __tame_fn_49, __tame_k]);
                        tame.setActiveCb (null);
                    };
                    tame.callChain([__tame_fn_40, __tame_k]);
                    tame.setActiveCb (null);
                };
                tame.callChain([__tame_fn_38, __tame_fn_50, __tame_k]);
                tame.setActiveCb (null);
            };
            tame.callChain([__tame_fn_37, __tame_k]);
            tame.setActiveCb (null);
        };
        tame.callChain([__tame_fn_51, autocb, __tame_k]);
        tame.setActiveCb (null);
    }
    var getTeams =
    function  (autocb) {
        var __tame_defer_cb = tame.findDeferCb ([autocb]);
        tame.setActiveCb (__tame_defer_cb);
        var __tame_this = this;
        var __tame_fn_69 = function (__tame_k) {
            tame.setActiveCb (__tame_defer_cb);
            autocb = autocb ||
            function  () {
            }
            ;
            var __tame_fn_52 = function (__tame_k) {
                tame.setActiveCb (__tame_defer_cb);
                var __tame_fn_53 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var __tame_defers = new tame.Deferrals (__tame_k);
                    var __tame_fn_54 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        collections . teams . getMany (
                        __tame_defers.defer ( { 
                            assign_fn : 
                                function () {
                                    err = arguments[0];
                                    teams = arguments[1];
                                }
                                ,
                            parent_cb : __tame_defer_cb,
                            line : 90,
                            file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                        } )
                        ) ;
                        tame.callChain([__tame_k]);
                        tame.setActiveCb (null);
                    };
                    __tame_fn_54(tame.end);
                    __tame_defers._fulfill();
                    tame.setActiveCb (null);
                };
                var __tame_fn_68 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var teamsCollection = { } ;
                    var __tame_fn_55 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        var __tame_fn_56 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            var __tame_k_implicit = {};
                            var i = 0 , n = teams . length;
                            var __tame_fn_57 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                var __tame_fn_58 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    i ++
                                    tame.callChain([__tame_fn_57, __tame_k]);
                                    tame.setActiveCb (null);
                                };
                                __tame_k_implicit.k_break = __tame_k;
                                __tame_k_implicit.k_continue = function() { __tame_fn_58(__tame_k); };
                                if (i < n) {
                                    var __tame_fn_59 = function (__tame_k) {
                                        tame.setActiveCb (__tame_defer_cb);
                                        var __tame_fn_60 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            var __tame_defers = new tame.Deferrals (__tame_k);
                                            var __tame_fn_61 = function (__tame_k) {
                                                tame.setActiveCb (__tame_defer_cb);
                                                teams [ i ] . getRelated ( 'students' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            students = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 95,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                teams [ i ] . getRelated ( 'project' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            project = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 96,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                tame.callChain([__tame_k]);
                                                tame.setActiveCb (null);
                                            };
                                            __tame_fn_61(tame.end);
                                            __tame_defers._fulfill();
                                            tame.setActiveCb (null);
                                        };
                                        var __tame_fn_62 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            teamsCollection [ i ] = teams [ i ] . data ;
                                            teamsCollection [ i ] . project = project . data ;
                                            teamsCollection [ i ] . students = [ ] ;
                                            tame.callChain([__tame_k]);
                                            tame.setActiveCb (null);
                                        };
                                        tame.callChain([__tame_fn_60, __tame_fn_62, __tame_k]);
                                        tame.setActiveCb (null);
                                    };
                                    tame.callChain([__tame_fn_59, __tame_fn_58, __tame_k]);
                                } else {
                                    tame.callChain([__tame_k]);
                                }
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_57, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        var __tame_fn_67 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            ;
                            var __tame_fn_63 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                var __tame_fn_64 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                     for (var j = 0 , m = students . length ; j < m ; j ++) {
                                        teamsCollection [ i ] . students [ j ] = students [ j ] . data ;
                                    }
                                    tame.callChain([__tame_k]);
                                    tame.setActiveCb (null);
                                };
                                var __tame_fn_66 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    ;
                                    var __tame_fn_65 = function (__tame_k) {
                                        tame.setActiveCb (__tame_defer_cb);
                                            autocb(teamsCollection);
                                        tame.setActiveCb (null);
                                    };
                                    tame.callChain([__tame_fn_65, __tame_k]);
                                    tame.setActiveCb (null);
                                };
                                tame.callChain([__tame_fn_64, __tame_fn_66, __tame_k]);
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_63, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        tame.callChain([__tame_fn_56, __tame_fn_67, __tame_k]);
                        tame.setActiveCb (null);
                    };
                    tame.callChain([__tame_fn_55, __tame_k]);
                    tame.setActiveCb (null);
                };
                tame.callChain([__tame_fn_53, __tame_fn_68, __tame_k]);
                tame.setActiveCb (null);
            };
            tame.callChain([__tame_fn_52, __tame_k]);
            tame.setActiveCb (null);
        };
        tame.callChain([__tame_fn_69, autocb, __tame_k]);
        tame.setActiveCb (null);
    }
    var getTeachers =
    function  (autocb) {
        var __tame_defer_cb = tame.findDeferCb ([autocb]);
        tame.setActiveCb (__tame_defer_cb);
        var __tame_this = this;
        var __tame_fn_84 = function (__tame_k) {
            tame.setActiveCb (__tame_defer_cb);
            autocb = autocb ||
            function  () {
            }
            ;
            var __tame_fn_70 = function (__tame_k) {
                tame.setActiveCb (__tame_defer_cb);
                var __tame_fn_71 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var __tame_defers = new tame.Deferrals (__tame_k);
                    var __tame_fn_72 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        collections . teachers . getMany (
                        __tame_defers.defer ( { 
                            assign_fn : 
                                function () {
                                    err = arguments[0];
                                    teachers = arguments[1];
                                }
                                ,
                            parent_cb : __tame_defer_cb,
                            line : 112,
                            file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                        } )
                        ) ;
                        tame.callChain([__tame_k]);
                        tame.setActiveCb (null);
                    };
                    __tame_fn_72(tame.end);
                    __tame_defers._fulfill();
                    tame.setActiveCb (null);
                };
                var __tame_fn_83 = function (__tame_k) {
                    tame.setActiveCb (__tame_defer_cb);
                    var teachersCollection = { } ;
                    var __tame_fn_73 = function (__tame_k) {
                        tame.setActiveCb (__tame_defer_cb);
                        var __tame_fn_74 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            var __tame_k_implicit = {};
                            var i = 0 , n = teachers . length;
                            var __tame_fn_75 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                var __tame_fn_76 = function (__tame_k) {
                                    tame.setActiveCb (__tame_defer_cb);
                                    i ++
                                    tame.callChain([__tame_fn_75, __tame_k]);
                                    tame.setActiveCb (null);
                                };
                                __tame_k_implicit.k_break = __tame_k;
                                __tame_k_implicit.k_continue = function() { __tame_fn_76(__tame_k); };
                                if (i < n) {
                                    var __tame_fn_77 = function (__tame_k) {
                                        tame.setActiveCb (__tame_defer_cb);
                                        var __tame_fn_78 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            var __tame_defers = new tame.Deferrals (__tame_k);
                                            var __tame_fn_79 = function (__tame_k) {
                                                tame.setActiveCb (__tame_defer_cb);
                                                teachers [ i ] . getRelated ( 'institute' ,
                                                __tame_defers.defer ( { 
                                                    assign_fn : 
                                                        function () {
                                                            err = arguments[0];
                                                            institute = arguments[1];
                                                        }
                                                        ,
                                                    parent_cb : __tame_defer_cb,
                                                    line : 117,
                                                    file : "/home/eq/Programming/node.js/coursework/modules/test.tjs"
                                                } )
                                                ) ;
                                                tame.callChain([__tame_k]);
                                                tame.setActiveCb (null);
                                            };
                                            __tame_fn_79(tame.end);
                                            __tame_defers._fulfill();
                                            tame.setActiveCb (null);
                                        };
                                        var __tame_fn_80 = function (__tame_k) {
                                            tame.setActiveCb (__tame_defer_cb);
                                            teachersCollection [ i ] = teachers [ i ] . data ;
                                            teachersCollection [ i ] . institute = institute . data ;
                                            tame.callChain([__tame_k]);
                                            tame.setActiveCb (null);
                                        };
                                        tame.callChain([__tame_fn_78, __tame_fn_80, __tame_k]);
                                        tame.setActiveCb (null);
                                    };
                                    tame.callChain([__tame_fn_77, __tame_fn_76, __tame_k]);
                                } else {
                                    tame.callChain([__tame_k]);
                                }
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_75, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        var __tame_fn_82 = function (__tame_k) {
                            tame.setActiveCb (__tame_defer_cb);
                            ;
                            
                            console . log ( teachersCollection ) ;
                            var __tame_fn_81 = function (__tame_k) {
                                tame.setActiveCb (__tame_defer_cb);
                                    autocb(teachersCollection);
                                tame.setActiveCb (null);
                            };
                            tame.callChain([__tame_fn_81, __tame_k]);
                            tame.setActiveCb (null);
                        };
                        tame.callChain([__tame_fn_74, __tame_fn_82, __tame_k]);
                        tame.setActiveCb (null);
                    };
                    tame.callChain([__tame_fn_73, __tame_k]);
                    tame.setActiveCb (null);
                };
                tame.callChain([__tame_fn_71, __tame_fn_83, __tame_k]);
                tame.setActiveCb (null);
            };
            tame.callChain([__tame_fn_70, __tame_k]);
            tame.setActiveCb (null);
        };
        tame.callChain([__tame_fn_84, autocb, __tame_k]);
        tame.setActiveCb (null);
    }
    module . exports . institutes = getInstitutes ;
    module . exports . students = getStudents ;
    module . exports . projects = getProjects ;
    module . exports . teams = getTeams ;
    module . exports . teachers = getTeachers ;
    tame.callChain([__tame_k]);
    tame.setActiveCb (null);
};
__tame_fn_0 (tame.end);